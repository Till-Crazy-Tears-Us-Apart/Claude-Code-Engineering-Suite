{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Change Log Output",
  "type": "object",
  "required": ["qa_pairs", "file_modifications", "systemic_impact", "verification_status"],
  "properties": {
    "qa_pairs": {
      "type": "array",
      "description": "Section 1: Pre-Implementation Discussion",
      "items": {
        "type": "object",
        "required": ["question", "answer", "decision"],
        "properties": {
          "question": { "type": "string", "description": "Technical question raised" },
          "answer": { "type": "string", "description": "Consensus reached" },
          "decision": { "type": "string", "description": "Final architectural decision" }
        }
      }
    },
    "file_modifications": {
      "type": "array",
      "description": "Section 2: File-Level Modifications",
      "items": {
        "type": "object",
        "required": ["file_path", "summary", "reason", "role", "ripple_effects", "logic_explanation"],
        "properties": {
          "file_path": { "type": "string" },
          "summary": { "type": "string", "description": "Concise description (No adjectives)" },
          "reason": { "type": "string", "description": "Why this change was necessary" },
          "role": { "type": "string", "description": "Role in Data Flow" },
          "ripple_effects": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Upstream/Downstream impacts"
          },
          "logic_explanation": { "type": "string", "description": "Detailed logic explanation with line references" }
        }
      }
    },
    "systemic_impact": {
      "type": "object",
      "description": "Section 3: Systemic Impact Analysis",
      "required": ["data_flow", "functional_hierarchy", "framework_impact", "api_consistency", "performance"],
      "properties": {
        "data_flow": { "type": "string", "description": "Changes in data passing" },
        "functional_hierarchy": { "type": "string", "description": "Changes in module layering" },
        "framework_impact": { "type": "string", "description": "Decorator/Middleware effects" },
        "api_consistency": { "type": "string", "description": "Signature changes" },
        "performance": { "type": "string", "description": "Complexity/Memory risks" }
      }
    },
    "verification_status": {
      "type": "object",
      "description": "Section 4: Verification Status",
      "required": ["tests_passed", "manual_checks"],
      "properties": {
        "tests_passed": { "type": "array", "items": { "type": "string" } },
        "manual_checks": { "type": "array", "items": { "type": "string" } }
      }
    }
  }
}